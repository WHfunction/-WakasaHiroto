<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
<link rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAHhJREFUWEft1rENACAMxLB78sn6VxUo4iIKv33g4d375sA79++BAEGEQCAQCEQYEAgEAoFAGBAIRAIBgYAggEAgEAgDggAIBALDgEAgEAgDYkAgEAgEA2JAIBAIBAYGAoFAIBCICfZbk2z/4d4fa71fgc3W4A8AAAAASUVORK5CYII=">
    <?!= include('CSS'); ?>
</head>
<body>
    <header>
        <div class="header-top">
            <h1 id="header-title" style="cursor: pointer;">若狭裕人マイポータル</h1>
            <div class="header-right-panel">
                <div class="notification-stack">
                    <div id="gmail-notification" class="is-hidden"></div>
                    <div id="submission-notification" class="is-hidden"></div>
                    <div id="tomorrow-submission-notification" class="is-hidden"></div>
                </div>
                <div id="header-stats" class="is-hidden">
                    <div id="header-study-total"></div>
                    <div id="header-expense-total"></div>
                </div>
                <div id="header-countdown" class="is-hidden"></div>
                <div id="clock">
                    <div id="clock-date"></div>
                    <div id="clock-time"></div>
                </div>
            </div>
        </div>
        <nav>
            <button class="nav-button active" id="nav-dashboard">よく使うアプリ</button>
            <button class="nav-button" id="nav-study-tracker">勉強管理</button>
            <button class="nav-button" id="nav-calendar">カレンダー</button>
            <button class="nav-button" id="nav-expense-tracker">今月の出費</button>
            <button class="nav-button" id="nav-notepad">メモ帳</button>
            <button class="nav-button" id="nav-countdown">カウントダウン</button>
            <button class="nav-button" id="nav-gmail">Gメール受信</button>
        </nav>
    </header>

    <main id="dashboard-container" class="active">
        <div id="search-zone">
            <section class="widget">
                <div class="widget-header"><h2>アプリ内検索</h2></div>
                <div class="form-group"><input type="search" id="local-app-search-input" class="form-group input" placeholder="このページのアプリを検索..."></div>
            </section>
            <section class="widget">
                <div class="widget-header"><h2>Google 検索</h2></div>
                <form class="search-widget-form" action="https://www.google.com/search" method="get" target="_blank"><input type="search" name="q" placeholder="Googleで検索..." required><button type="submit">検索</button></form>
            </section>
            <section class="widget">
                <div class="widget-header"><h2>YouTube 検索</h2></div>
                <form class="search-widget-form" action="https://www.youtube.com/results" method="get" target="_blank"><input type="search" name="search_query" placeholder="YouTubeで検索..." required><button type="submit">検索</button></form>
            </section>
            <section class="widget">
                <div class="widget-header"><h2>Wikipedia 検索</h2></div>
                <form class="search-widget-form" action="https://ja.wikipedia.org/w/index.php" method="get" target="_blank"><input type="search" name="search" placeholder="Wikipediaで検索..." required><button type="submit">検索</button></form>
            </section>
        </div>
        <section class="widget filterable-widget"><details><summary><div class="widget-header"><h2>SNS (クリックして開く)</h2></div></summary><div class="link-container" id="sns-links"></div></details></section>
        <section class="widget filterable-widget"><details><summary><div class="widget-header"><h2>AI (クリックして開く)</h2></div></summary><div class="link-container" id="ai-links"></div></details></section>
        <section class="widget filterable-widget"><details><summary><div class="widget-header"><h2>プログラミング (クリックして開く)</h2></div></summary><div class="link-container" id="programming-links"></div></details></section>
        <section class="widget filterable-widget"><details><summary><div class="widget-header"><h2>研究 (クリックして開く)</h2></div></summary><div class="link-container" id="research-links"></div></details></section>
        <section class="widget filterable-widget"><details><summary><div class="widget-header"><h2>勉強 (クリックして開く)</h2></div></summary><div class="link-container" id="study-links"></div></details></section>
        <section class="widget filterable-widget"><details><summary><div class="widget-header"><h2>学校 (クリックして開く)</h2></div></summary><div class="link-container" id="school-links"></div></details></section>
        <section class="widget filterable-widget"><details><summary><div class="widget-header"><h2>時刻表 (クリックして開く)</h2></div></summary><div class="link-container" id="timetable-links"></div></details></section>
        <section class="widget filterable-widget"><details><summary><div class="widget-header"><h2>地理 (クリックして開く)</h2></div></summary><div class="link-container" id="geo-links"></div></details></section>
        <section class="widget filterable-widget"><details><summary><div class="widget-header"><h2>音楽 (クリックして開く)</h2></div></summary><div class="link-container" id="music-links"></div></details></section>
        <section class="widget filterable-widget"><details><summary><div class="widget-header"><h2>西園寺 (クリックして開く)</h2></div></summary><div class="link-container" id="saionji-links"></div></details></section>
        <section class="widget" style="background-color: #e9ecef; border-style: dashed;"><div class="widget-header"><h2>新しいサイトを追加</h2></div><form id="add-site-form" style="display: flex; flex-direction: column; gap: 16px; margin-top: 16px;"><div class="form-group"><label for="site-name">サイト名</label><input type="text" id="site-name" required></div><div class="form-group"><label for="site-url">URL</label><input type="url" id="site-url" required></div><div class="form-group"><label for="site-category">カテゴリー</label><select id="site-category" required></select></div><button type="submit">追加する</button></form><button id="clear-added-sites" class="danger-button">追加したサイトを全て削除</button></section>
    </main>
    <main id="study-tracker-container"><section class="widget"><div class="widget-header"><h2>今月の目標と進捗</h2></div><div class="progress-widget-content"><div class="progress-chart"><div id="progress-text" class="progress-text">0%</div><svg width="150" height="150" viewBox="0 0 150 150" class="progress-circle"><circle class="progress-circle-bg" cx="75" cy="75" r="65"></circle><circle id="progress-bar" class="progress-circle-bar" cx="75" cy="75" r="65" stroke-dasharray="408.4" stroke-dashoffset="408.4"></circle></svg></div><div class="progress-details"><p>目標: <strong id="goal-hours-display">0</strong> 時間</p><p>今月: <strong id="current-hours-display">0.0</strong> 時間</p><p>残り: <strong id="remaining-hours-display">0.0</strong> 時間</p></div></div><form id="goal-form" style="display: flex; gap: 10px; margin-top: 16px; align-items: center;"><div class="form-group"><label for="monthly-goal">月間目標 (時間)</label><input type="number" id="monthly-goal" min="0"></div><button type="submit" class="primary-button">保存</button></form></section><section class="widget"><div class="widget-header"><h2>今日の勉強時間を記録</h2></div><form id="add-study-log-form"><div class="form-group" style="margin-bottom: 16px;"><label for="study-date">日付</label><input type="date" id="study-date" required></div><div class="form-row" style="display:grid; grid-template-columns: 1fr 1fr; gap: 10px; align-items: flex-end;"><div class="form-group"><label for="study-subject">教科</label><select id="study-subject" required></select></div><div class="form-group"><label for="study-minutes">勉強時間 (分)</label><input type="number" id="study-minutes" min="1" required></div></div><button type="submit" class="primary-button" style="margin-top: 16px;">記録</button></form></section><section class="widget"><div class="widget-header"><h2>本日の記録一覧</h2></div><ul id="study-log-list" class="log-list"></ul></section><section class="widget"><div class="widget-header"><h2>週間学習グラフ</h2></div><div class="chart-wrapper"><div class="y-axis" id="weekly-chart-y-axis"></div><div id="weekly-chart-container" class="bar-chart-container"></div></div></section><section class="widget"><div class="widget-header"><h2>今月の教科別学習時間</h2></div><ul id="subject-totals-list" class="log-list"></ul></section></main>
    <main id="calendar-container"><section class="widget"><div class="calendar-controls"><button id="prev-month">&lt; 前月</button><h2 id="calendar-month-year"></h2><button id="next-month">次月 &gt;</button><button id="today-btn">今日</button></div><div class="calendar-grid calendar-weekdays"><div>日</div><div>月</div><div>火</div><div>水</div><div>木</div><div>金</div><div>土</div></div><div class="calendar-grid" id="calendar-dates-grid"></div></section><section class="widget"><h2 id="selected-date-display"></h2><ul id="event-list"></ul><form id="add-event-form" style="display: flex; flex-direction: column; gap: 16px;"><div class="form-group"><label for="event-title">予定のタイトル</label><input type="text" id="event-title" required></div><div class="form-group"><label for="event-category">系統</label><select id="event-category"></select></div><div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;"><div class="form-group"><label for="event-start-time">開始</label><input type="time" id="event-start-time"></div><div class="form-group"><label for="event-end-time">終了</label><input type="time" id="event-end-time"></div></div><button type="submit" id="event-submit-btn">予定を追加</button><button type="button" id="event-cancel-btn" class="secondary-button" style="display: none;">キャンセル</button></form></section></main>
    <main id="expense-tracker-container"><section class="widget"><div class="widget-header"><h2>今月の出費合計</h2></div><div id="expense-total-display">0円</div></section><section class="widget"><div class="widget-header"><h2>出費を記録</h2></div><form id="add-expense-form"><div class="form-group"><label for="expense-item-select">買ったもの</label><select id="expense-item-select"></select></div><div id="expense-details-container"></div><button type="submit" class="primary-button" style="margin-top: 16px;">記録する</button></form></section><section class="widget"><div class="widget-header"><h2>今月の出費一覧</h2></div><ul id="expense-log-list" class="log-list"></ul></section><section class="widget"><div class="widget-header"><h2>今月のグループ別出費</h2></div><ul id="expense-group-totals-list" class="log-list"></ul></section></main>
    <main id="notepad-container"><div class="notepad-sidebar"><button id="add-note-btn" class="primary-button">新しいメモを追加 ＋</button><ul id="note-list"></ul></div><div class="notepad-editor hidden" id="notepad-editor"><input type="text" id="note-title-input" placeholder="タイトルを入力..."><textarea id="note-body-textarea" placeholder="内容を入力..."></textarea><button id="delete-note-btn" class="danger-button">このメモを削除</button></div><div class="widget" id="notepad-welcome"><div class="widget-header"><h2>メモ帳へようこそ</h2></div><p>左の「新しいメモを追加」ボタンから、メモを始めましょう。</p></div></main>
    <main id="countdown-container"><section class="widget"><div class="widget-header"><h2>新しいカウントダウンを追加</h2></div><form id="add-countdown-form"><div class="form-group" style="margin-bottom: 16px;"><label for="countdown-title-input">目標のタイトル</label><input type="text" id="countdown-title-input" required></div><div class="form-group"><label for="countdown-date-input">目標の日付</label><input type="date" id="countdown-date-input" required></div><button type="submit" class="primary-button" style="margin-top: 16px;">追加</button></form></section><section class="widget"><div class="widget-header"><h2>カウントダウン一覧</h2></div><ul id="countdown-list" class="log-list"></ul></section></main>
    <main id="gmail-container"><section class="widget"><div class="widget-header" style="display: flex; align-items: center; justify-content: space-between;"><h2>Gメール受信トレイ (最新20件)</h2><button id="refresh-gmail-btn" class="primary-button" style="width: auto; padding: 8px 16px;">更新</button></div><div id="gmail-loading" style="text-align: center; padding: 20px; display: none;">読み込み中...</div><ul id="gmail-list" class="log-list"></ul></section></main>

    <?!= include('JavaScript'); ?>
</body>
</html>
